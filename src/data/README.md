# 📁 Metadata Directory

This directory contains **structured metadata(JSON directory + file_descriptions.json) and sample research questions(example_questions.json)** designed to assist scientific analysis of simulation data. It helps both users and AI systems comprehend the dataset's content, structure, and semantic links between tables and their fields. All metadata is in JSON format for ease of processing by AI pipelines.

This directory will also contain the autogenerated vector_store for RAG. If you find that the RAG is not working, delete vector_store folder and re-run the script. It should regenerate vector_store correctly.
---

## 📄 File Descriptions

### 1. `file_descriptions.json`
Provides high-level descriptions for each leaf file in the dataset, explaining what data it holds and how it connects to other tables.

- 🔑 **Key**: File name (e.g., `"haloproperties"`)  
- 📝 **Value**: Descriptive summary of the file and its key relationships

✅ Sample:
```json
{
  "haloproperties": "This table contains properties of dark matter halos computed by the friend-of-friends (fof) algorithm or spherical overdensity (sod) algorithm. Each entry represents one dark matter halo, and the 'fof_halo_tag' field is the primary key."
}
```

---

### 2. `JSON/data_variables.json`
Details metadata for columns within each file, including:

- `type`: Data type (e.g., `float`, `int`)  
- `description`: Explanation of the column's meaning  
- `nullable`: Whether null values are allowed  

📁 **Format**:
```json
{
  "filename": {
    "description": "...",
    "columns": {
      "column_name": {
        "type": "...",
        "description": "...",
        "nullable": "True" | "False"
      }
    }
  }
}
```

✅ Sample:
```json
{
  "haloproperties": {
    "description": "This table contains properties of dark matter halos computed by the friend-of-friends (fof) algorithm or spherical overdensity (sod) algorithm. Each entry represents one dark matter halo, and the 'fof_halo_tag' field is the primary key.",
    "columns": {
      "fof_halo_count": {
        "type": "float",
        "description": "[IMPORTANT] This is important. Number of particles identified in the FoF halo by the friend-of-friends algorithm. Unless specified, use this as the default for finding halo size/mass.",
        "nullable": "False"
      }
    }
  }
}
```

---

### 3. `example_questions.json`
Includes example scientific questions useful for testing retrieval, reasoning, or natural language interfaces over the simulation data.

Each entry contains:
- `id`: Unique question identifier  
- `text`: Reformulated question for clarity or use  
- `original`: Original expert wording  
- `expertise_difficulty`: Difficulty rating (e.g., Easy, Medium, Hard)  
- `scale`: Scope of analysis (e.g., single simulation, multi-timestep)  

✅ Sample:
```json
{
  "id": 2,
  "text": "Within simulation 0, how does the intrinsic scatter of the log concentration–mass relation evolve over time? When does the scatter peak?",
  "original": "Within a single simulation, how does the intrinsic scatter of the concentration–mass relation for all haloes evolve from z = 2 down to z = 0?",
  "expertise_difficulty": "Hard",
  "scale": "multi-timestep, single-simulation"
}
```

---

## 📚 Purpose

This metadata supports:

- ⚙️ **Automated systems**: Enables AI to understand table structures and relationships  
- 🧠 **Human users**: Clarifies available data for querying and exploration  
- 🧪 **Evaluation**: Provides test questions for QA and data tools  

---

## 🔄 Extending Metadata

- To add new tables, update both:  
  - `file_descriptions.json` with file-level info  
  - `JSON/data_variables.json` with detailed schemas or automatically generate it  

---
```
